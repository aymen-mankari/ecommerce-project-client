<app-navbar></app-navbar>

<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
<div class="container">

    <div *ngIf="flagStock" class="alert alert-warning alert-dismissible fade show" role="alert">
        <strong>Sorry!</strong> You have reached the stock limit of this product.
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>

    <i class="fa fa-cart"></i>
    <h1 class="display-4 pt-5 mb-0">Products</h1>
    <hr class="mt-0 mb-5 bg-dark">

    <div class="shadow p-3 mb-5 bg-white rounded">
        <div class="d-flex p-2 bd-highlight">

            <form class="form-inline">
                <input class="form-control mr-sm-2" [formControl]="keyword"  type="search" placeholder="Search" aria-label="Search">
                <button class="btn btn-outline-success my-2 my-sm-0" type="submit" (click)="searchByKeyword()">Search</button>
            </form>

        </div>
    </div>





    <div class="rounded shadow bg-white p-5">
        <!--<div class="row">
            <div class="col-12 d-flex">
                <h2 class="font-weight-light"><i class="fa fa-sticky-note"></i> Posts</h2>
                <button class="btn btn-primary ml-auto" type="button" (click)="resetForm()">
                    <i class="fa fa-plus"></i>
                </button>
            </div>
        </div>-->
        <div class="row">
            <!--
<div class="col-lg-6" *ngFor="let post of posts" style="margin: 5px 0;">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">{{post.title}}</h5>
                        
                        <p>{{post.content}}</p>
                        <a [routerLink]="[ '/post', post.id ]" class="card-link">Read more...</a>
                    </div>
                    <div class="card-footer">
                        <small class="text-muted">Created on {{ post.createdOn }}</small>
                    </div>
                </div>
            </div>
            -->
            <div class="card-deck">
                <div class="col-lg-6" *ngFor="let p of products" style="margin: 10px 0;">
                    <div class="card">
                        <img src="data:image/jpeg;base64,{{ p.picByte }}" alt="..." class="img-thumbnail" style="min-height:400px;">
                        <div class="card-body">
                            <h5 class="card-title">{{p.name}}</h5>
                            <p class="card-text">{{ p.designation}}</p>
                            <!-- Button trigger modal -->
                            
                            <div class="d-flex justify-content-between">
                                <button type="button" class="btn btn-primary" data-toggle="modal"
                                data-target="#detailsProductModal" (click)="detailsProduct(p)">
                                View details</button>
                                <b>{{ p.price }}.00 $</b>
                            </div>
                            <!--<button type="button" class="btn btn-success" style="float: right;">Add to cart</button>-->
                        </div>
                        <button type="button" class="btn btn-success" (click)="addToCart(p)">
                            Add to cart</button>
                    </div>
                </div>

            </div>

        </div>

    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="detailsProductModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Details product</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>

            <div class="modal-body">
                <h5>Product name</h5>
                <img src="data:image/jpeg;base64,{{ currentProduct.picByte }}" alt="..." class="img-thumbnail">
                <hr>
                <h5>Description : </h5>
                <p>{{currentProduct.description}} </p>
                <hr>

                <div class="row">
                    <div class="col-md-4">
                        <h5>Price : </h5>
                        <p>{{currentProduct.price}}</p>
                    </div>
                    <div class="col-md-4 offset-md-4">
                        <h5>Reference : </h5>
                        <p>{{currentProduct.reference}} </p>
                    </div>
                </div>
                <hr>
                
                    <!--<div class="form-row">
                        <div class="col-md-6">
                            <h5>Quantity : </h5>
                            <select id="inputQuantity" name="quantity" ngModel class="form-control">
                                <option selected>Choose...</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                            </select>
                        </div>
                    </div>-->
                

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="submit" class="btn btn-success" (click)="addToCart(currentProduct)">Add to cart</button>
            </div>

        </div>
    </div>
</div>